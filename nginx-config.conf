# Nginx Configuration for Flashcards System
# Add this to your server block

location / {
    try_files $uri $uri/ /index.php?$args;
}

location ~ \.php$ {
    fastcgi_pass 127.0.0.1:9000;  # או unix socket
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

# Security - block access to sensitive files
location ~ /\. {
    deny all;
}

location ~ /(site|kirby)/ {
    deny all;
}

location /content/ {
    location ~ \.(txt|md|mdown)$ {
        deny all;
    }
}

# Enable gzip
gzip on;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;